{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/wf-NanoTerm/master/nextflow_schema.json",
  "title": "wf-NanoTerm pipeline parameters",
  "description": "Determine phage termini from nanopore sequencing",
  "type": "object",
  "definitions": {
    "input_output_options": {
      "title": "Input/output options",
      "type": "object",
      "fa_icon": "fas fa-terminal",
      "description": "Define where the pipeline should find input data and save output data.",
      "required": ["input", "out_dir"],
      "properties": {
        "input": {
          "type": "string",
          "format": "file-path",
          "mimetype": "fastq.gz",
          "pattern": "^\\S+\\.fastq.gz",
          "schema": "assets/schema_input.json",
          "description": "Input file containing sequence reads (fastq.gz)",
          "help_text": "You will need to create a design file with information about the samples in your experiment before running the pipeline. Use this parameter to specify its location. It has to be a comma-separated file with 3 columns, and a header row.",
          "fa_icon": "fas fa-file-alt"
        },
        "out_dir": {
          "type": "string",
          "description": "Path to the output directory",
          "fa_icon": "far fa-folder-open"
        }
      }
    },
    "reference_genome_options": {
      "title": "Reference genome options",
      "type": "object",
      "fa_icon": "fas fa-dna",
      "description": "Reference genome related files and options required for the workflow.",
      "properties": {
        "fasta": {
          "type": "string",
          "format": "file-path",
          "mimetype": "text/plain",
          "pattern": "^\\S+\\.fn?a(sta)?(\\.gz)?$",
          "description": "Path to FASTA genome file.",
          "help_text": "This parameter is *mandatory* if `--genome` is not specified. If you don't have a BWA index available this will be generated for you automatically. Combine with `--save_reference` to save BWA index for future runs.",
          "fa_icon": "far fa-file-code"
        }
      },
      "required": ["fasta"]
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/input_output_options"
    },
    {
      "$ref": "#/definitions/reference_genome_options"
    }
  ],
  "properties": {
    "seqplat": {
      "type": "string",
      "default": "nanopore",
      "description": "Sequencing platform used.  Options are nanopore (default) or illumina."
    },
    "name": {
      "type": "string",
      "default": "my_phage",
      "description": "Name of the phage (default: my_phage)"
    }
  }
}
